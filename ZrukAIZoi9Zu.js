"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3969],{366:function(e,n,r){r.d(n,{a:function(){return u}});var t=r(26042),i=r(69396),o=r(99534),a=r(85893),s=r(67294),c=r(68527);function l(e,n){var r=e.children,s=e.spacing,l=void 0===s?"0.5rem":s,u=(0,o.Z)(e,["children","spacing"]);return(0,a.jsx)(c.Kq,(0,i.Z)((0,t.Z)({ref:n,direction:"column",spacing:l,as:"ul"},u),{listStyleType:"none",children:r}))}var u=(0,s.forwardRef)(l)},67986:function(e,n,r){r.d(n,{a:function(){return s}});var t=r(85893),i=r(68527),o=r(49609),a=r(58533);function s(e){var n=e.hasMore,r=e.loadMore,s=e.dataLength,c=e.children;e.scrollableTarget;return(0,t.jsx)(i.xu,{children:(0,t.jsx)(a.Z,{hasMore:n,next:r,dataLength:s,endMessage:(0,t.jsx)(i.M5,{height:"3rem",marginTop:"1.5rem",children:(0,t.jsx)(i.xv,{as:"span",fontSize:"0.875rem",color:"gray.500",children:"Voc\xea chegou no fim da lista."})}),loader:(0,t.jsx)(i.M5,{height:"3rem",marginTop:"1.5rem",children:(0,t.jsx)(o.$,{color:"pink.600"})}),children:c})})}},22136:function(e,n,r){r.d(n,{H:function(){return l}});var t=r(26042),i=r(69396),o=r(99534),a=r(85893),s=r(68527);function c(e,n){var r=e.children,c=(0,o.Z)(e,["children"]);return(0,a.jsx)(s.xu,(0,i.Z)((0,t.Z)({ref:n,as:"li",w:"full"},c),{children:r}))}var l=(0,r(67294).forwardRef)(c);l.displayName="ListItem"},76422:function(e,n,r){r.d(n,{g:function(){return o}});var t=r(99534),i=r(67294);function o(e){var n=e.children,r=(0,t.Z)(e,["children"]),o=i.Children.only(n);return(0,i.cloneElement)(o,r)}},35397:function(e,n,r){r.d(n,{b:function(){return d}});var t=r(26042),i=r(69396),o=r(99534),a=r(85893),s=r(41664),c=r.n(s),l=r(15193),u=r(53854);function d(e){var n=e.href,r=(0,o.Z)(e,["href"]);return(0,a.jsx)(c(),{href:n,passHref:!0,children:(0,a.jsx)(l.zx,(0,i.Z)((0,t.Z)({as:"a",variant:"link",fontWeight:"500",fontSize:"1rem",lineHeight:"1.75rem",color:"gray.400",marginY:"1rem",marginLeft:"auto",textDecoration:"none",_hover:{textDecoration:"underline"},rightIcon:(0,a.jsx)(u.mR2,{size:14,color:"#7F8B9E"})},r),{children:"Ver mais"}))})}},41146:function(e,n,r){r.d(n,{R:function(){return u}});var t=r(85893),i=r(68527),o=r(38152),a=r(15193),s=r(48081),c=r(50293),l=r(18946);function u(e){var n=(0,s.H)().onOpenModalDonation,r=(0,c.U)().onShareCampaign;return(0,t.jsx)(i.kC,{id:"card-donation",align:"center",justify:"center",zIndex:0,position:"static",boxShadow:"0 15px 20px rgba(13, 43, 89, 0.08)",bgColor:"white",width:"full",borderRadius:"0.75rem",p:"0rem 1.25rem 1.5rem",height:"fit-content",minHeight:"298px",children:(0,t.jsxs)(i.xu,{w:"100%",position:"relative",children:[(0,t.jsxs)(i.kC,{direction:"column",justifyContent:"unset",alignItems:"unset",children:[(0,t.jsxs)(i.xu,{children:[(0,t.jsx)(i.xv,{as:"span",fontSize:"0.75rem",fontWeight:"400",color:"gray.400",children:"ARRECADADO"}),(0,t.jsx)(i.xv,{as:"strong",display:"block",color:"pink.600",fontSize:["1.5rem",null,null,"2.25rem"],lineHeight:"1.2",children:(0,l.v)(e.total_raised)})]}),(0,t.jsx)(i.xu,{children:(0,t.jsxs)(i.xv,{as:"span",display:"block",fontWeight:"500",color:"gray.400",fontSize:"1.125rem",lineHeight:"1.6",mb:"3",children:["De ",(0,l.v)(e.goal_base)]})})]}),(0,t.jsx)(o.Ex,{value:e.totalRaisedInPercent,isIndeterminate:e.isLoading}),(0,t.jsxs)(i.kC,{justifyContent:"space-between",mt:"10px",fontSize:"16px",lineHeight:"27px",color:"gray.400",fontWeight:"500",children:[(0,t.jsx)(i.xv,{as:"span",children:e.isCampaignClosed?"Encerrada":e.timeRemaining}),(0,t.jsxs)(i.xv,{as:"span",children:[e.totalRaisedInPercent,"%"]})]}),e.isCampaignClosed?(0,t.jsx)(i.xu,{textAlign:"center",mt:["0.75rem",null,null,"1.5rem"],pt:["0.75rem",null,null,"1.5rem"],mx:["-20px",null,null,"-26px"],boxShadow:"inset 0px 1px 0px #EDEDF3",px:["20px",null,null,"26px"],children:(0,t.jsxs)(i.xu,{p:2,bgColor:"pink.150",borderRadius:"0.5rem",children:[(0,t.jsxs)(i.xv,{color:"pink.500",fontSize:"1.125rem",fontWeight:"900",lineHeight:"30px",children:["Encerrada em ",e.closureDateFormatted]}),(0,t.jsx)(i.xv,{color:"gray.900",fontSize:"0.875rem",lineHeight:"20px",children:"O resgate do valor dever\xe1 acontecer dentro de 40 dias contados ap\xf3s a data de encerramento."})]})}):(0,t.jsxs)(i.Kq,{direction:["row-reverse",null,null,"column"],mt:["0.75rem",null,null,"1.5rem"],spacing:"0.25rem",children:[(0,t.jsx)(a.zx,{boxShadow:"none",isFullWidth:!0,onClick:n,_hover:{bgColor:"pink.800",transition:"all 0.2s"},children:"Doar"}),(0,t.jsx)(a.zx,{isFullWidth:!0,color:"pink.600",bgColor:"pink.100",boxShadow:"none",_hover:{filter:"brightness(0.8)"},onClick:r,children:"Compartilhar"})]})]})})}},14738:function(e,n,r){r.d(n,{O:function(){return s}});var t=r(313),i=r(67294),o=r(30767),a=r(99472);function s(e){var n=e.id,r=e.goal_base,s=e.closure_date,c=e.status,l=e.isClosed,u=void 0!==l&&l,d=e.slug,m=(0,o.q)(d),p=m.isLoading,h=m.totalRaised,x=new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),f=Math.round(h/r*100),v=u||"Encerrada"===c||(0,t.default)(new Date(s),new Date),g=(0,a.T)(new Date(s));return(0,i.useMemo)((function(){return{total_raised:h,goal_base:r,totalRaisedInPercent:f,isCampaignClosed:v,timeRemaining:g,closureDateFormatted:x,campaign_id:n,isLoading:p}}),[h,r,f,v,g,x,n,p])}},29451:function(e,n,r){r.d(n,{s:function(){return V}});var t,i=r(47568),o=r(14924),a=r(26042),s=r(69396),c=r(7297),l=r(34051),u=r.n(l),d=r(85893),m=r(97375),p=r(68527),h=r(70917),x=r(47398),f=r(15193),v=r(10894),g=r(8193),C=r(67294),j=r(78318),b=r(81649),k=r(63249),w=r(83276),y=r(52804),S=r(67036),_=r(26429),M=r(63944),E=r(20495);!function(e){e.CAMPAIGN="CAMPAIGN",e.COMMENT="COMMENT"}(t||(t={}));var Z=r(78003),z=r(13195),O=r(828),R=r(37496),I=r(49609),N=r(63750),A=r(35397),T=r(34394),D=r(21190),P=r(44220);function L(e){var n=e.parent,r=e.onChangeParent,t=(0,m.qY)(),i=t.isOpen,o=t.onToggle,a=(0,O.Z)((0,m.Tx)({defaultValue:n,onChange:r}),2);a[0],a[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(H,{isOpen:i,onToggle:o}),(0,d.jsx)(F,{isOpen:i})]})}function H(e){var n=e.isOpen,r=e.onToggle,t=(0,j.M)().total;return 0===t?null:(0,d.jsx)(f.zx,{size:"sm",fontWeight:500,px:2,my:1,ml:-2,variant:"ghost",onClick:r,leftIcon:(0,d.jsx)(v.JO,{as:N.IAR,transition:"transform 300ms",transform:n?"rotate(180deg)":"rotate(0deg)"}),children:"".concat(t,t>1?" respostas":" resposta")})}function F(e){var n=e.isOpen,r=(0,j.M)(),t=r.total,i=r.hasMore,o=r.isLoading,a=r.comments,s=r.loadCommentsBy;return(0,C.useEffect)((function(){n&&s()}),[n,s]),(0,d.jsx)(R.UO,{in:n,children:(0,d.jsxs)(T.If,{condition:t>0&&o&&0===a.length,children:[(0,d.jsx)(T.Zf,{children:(0,d.jsx)(p.M5,{minH:20,children:(0,d.jsx)(I.$,{color:"pink.600"})})}),(0,d.jsxs)(T.Ot,{children:[(0,d.jsx)(p.aV,{children:(0,d.jsx)(D.M,{children:a.map((function(e){return(0,d.jsxs)(P.E.li,{exit:{opacity:0},children:[(0,d.jsx)(V,{comment:e}),(0,d.jsx)(p.xu,{h:"0.5rem"})]},e.id)}))})}),i&&(0,d.jsx)(A.b,{href:"",onClick:function(){return s()},isLoading:o})]})]})})}var B=r(84606),U=r(29059);function W(e){var n=e.isOpen,r=e.onClose,t=(0,w.a)().user,o=(0,j.M)(),a=o.parent_id,s=o.addComment,c=(0,C.useRef)(null);(0,C.useEffect)((function(){var e;n&&(null===c||void 0===c||null===(e=c.current)||void 0===e||e.focus())}),[n]);var l=r,m=function(){var e=(0,i.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=s,e.next=4,(0,Z.Hi)({commentId:a,description:n});case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),(0,B.S)(e.t2);case 11:return e.prev=11,r(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(n){return e.apply(this,arguments)}}();return(0,d.jsx)(R.UO,{in:n,children:(0,d.jsxs)(U.E,{display:"flex",mt:"0.75rem",onSubmit:m,children:[(0,d.jsx)(_.q,{boxSize:["1.5rem",null,"2rem"],mr:[1,null,2],src:null===t||void 0===t?void 0:t.avatar}),(0,d.jsxs)(p.xu,{display:"flex",flexDirection:"column",w:"full",children:[(0,d.jsx)(U.E.Textarea,{ref:c,fontSize:"0.875rem"}),(0,d.jsxs)(f.hE,{size:"xs",w:"full",justifyContent:"flex-end",mt:2,mb:1,mr:1,children:[(0,d.jsx)(U.E.Cancel,{onClick:l}),(0,d.jsx)(U.E.Submit,{})]})]})]})})}function G(){var e=(0,c.Z)(["\n  0% { transform: scale(1) }\n  50% { transform: scale(1.2) }\n  100% { transform: scale(1) }\n"]);return G=function(){return e},e}var q=(0,C.createContext)(null);function V(e){var n=e.comment,r=(0,m.qY)(),i=r.isOpen,o=r.onClose,a=r.onToggle,s=(0,j.M)().updateComment,c=(0,b.i)((0,k.P)((0,C.useCallback)(a,[a]))),l=(null===n||void 0===n?void 0:n.parent_type)===t.COMMENT;return(0,d.jsx)(q.Provider,{value:{comment:n},children:(0,d.jsxs)(p.xu,{as:"article",display:"flex",alignItems:"flex-start",w:"full",position:"relative","data-group":!0,children:[(0,d.jsx)($,{}),(0,d.jsxs)(p.xu,{w:"full",children:[(0,d.jsxs)(p.kC,{gap:["unset",null,"0.25rem"],mb:["0.25rem",null,"unset"],direction:["column",null,"row"],alignItems:["flex-start",null,"center"],overflow:"hidden",w:"100%",children:[(0,d.jsx)(Y,{}),(0,d.jsx)(J,{})]}),(0,d.jsx)(K,{}),(0,d.jsxs)(X,{children:[(0,d.jsx)(ee,{}),(0,d.jsx)(ne,{onClick:c}),(0,d.jsx)(re,{})]}),!l&&(0,d.jsxs)(j.C,{amount_per_page:30,parent_id:n.id,initialState:{total:n.repliesCount},children:[(0,d.jsx)(W,{isOpen:i,onClose:o}),(0,d.jsx)(L,{parent:n,onChangeParent:s})]})]})]})})}function $(){var e,n,r=(0,C.useContext)(q).comment,i=(n={},(0,o.Z)(n,t.COMMENT,{boxSize:["1.5rem",null,"2rem"],mr:[1,null,2]}),(0,o.Z)(n,t.CAMPAIGN,{boxSize:["2rem",null,"3rem"],mr:[2,null,4]}),n);return(0,d.jsx)(_.q,(0,a.Z)({src:null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e.avatar_url},i[r.parent_type]))}function Y(){var e,n,r,i=(0,C.useContext)(q).comment,c=(n={},(0,o.Z)(n,t.CAMPAIGN,{fontSize:["0.875rem",null,"1rem"],lineHeight:1.3}),(0,o.Z)(n,t.COMMENT,{fontSize:["0.75rem",null,"0.875rem"],lineHeight:1.1}),n);return(0,d.jsx)(p.xv,(0,s.Z)((0,a.Z)({as:"strong"},c[i.parent_type]),{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",children:null!==(r=null===i||void 0===i||null===(e=i.user)||void 0===e?void 0:e.name)&&void 0!==r?r:"An\xf4nimo"}))}function J(){var e,n=(0,C.useContext)(q).comment,r=(e={},(0,o.Z)(e,t.CAMPAIGN,{fontSize:"0.75rem",color:"gray.400",lineHeight:1}),(0,o.Z)(e,t.COMMENT,{fontSize:["0.625rem",null,"0.75rem"],color:"gray.400",lineHeight:1}),e);return(0,d.jsx)(p.xv,(0,s.Z)((0,a.Z)({as:"time"},r[n.parent_type]),{children:(0,E.T)(n.created_at)}))}function K(){var e=(0,C.useContext)(q).comment;return(0,d.jsx)(p.xv,{color:"gray.700",lineHeight:"1.3",whiteSpace:"pre-line",fontSize:["0.875rem",null,"1rem"],children:e.description})}function X(e){return(0,d.jsx)(p.kC,(0,a.Z)({ml:"-0.5rem",alignItems:"center"},e))}var Q=(0,h.F4)(G());function ee(){var e=(0,C.useContext)(q).comment,n=(0,C.useState)({toggledByUser:!1,isLiked:e.isLiked,likesCount:e.likesCount}),r=n[0],t=n[1],o=(0,b.i)((0,i.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t((function(e){return{isLiked:!0,toggledByUser:!0,likesCount:e.likesCount+1}})),n.next=3,(0,Z.xG)({comment_id:e.id});case 3:case"end":return n.stop()}}),n)})))),a=(0,b.i)((0,i.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t((function(e){return{isLiked:!1,toggledByUser:!1,likesCount:e.likesCount-1}})),n.next=3,(0,Z.Gb)({comment_id:e.id});case 3:case"end":return n.stop()}}),n)}))));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(x.u,{hasArrow:!0,label:"Gostei",children:(0,d.jsx)(f.hU,{size:"sm",variant:"ghost",borderRadius:"full",onClick:r.isLiked?a:o,animation:r.toggledByUser&&r.isLiked?"".concat(Q," 300ms ease-in-out"):void 0,"aria-label":"Marcar coment\xe1rio como gostei",color:r.isLiked?"pink.600":"gray.500",transition:"color 300ms",_focus:{},icon:(0,d.jsx)(v.JO,{fontSize:"1.25em",as:r.isLiked?g.M_L:g.lo})})}),(0,d.jsx)(p.xv,{as:"span",fontSize:"0.75rem",color:"gray.400",children:r.likesCount})]})}function ne(e){var n=(0,w.a)().user,r=(0,C.useContext)(q).comment,i=(null===r||void 0===r?void 0:r.parent_type)===t.COMMENT,o=(0,y.p)({roles:["ADMIN"],permissions:["MANAGE_CAMPAIGNS","MANAGE_USERS"]}),c=(null===n||void 0===n?void 0:n.id)===r.user_id;return i||!c&&!o?null:(0,d.jsx)(f.zx,(0,s.Z)((0,a.Z)({size:"xs",variant:"outline",ml:"0.75rem",borderRadius:"full",transition:"border-color 0.2s",_hover:{borderColor:"gray.700"}},e),{children:"Responder"}))}function re(e){var n=(0,C.useContext)(q).comment,r=(0,S.i)().onOpenAlertDialog,t=(0,j.M)().removeComment,o=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({title:"Remover mensagem",description:"Voc\xea deseja realmente remover essa mensagem?",cancelBtnText:"Cancelar",confirmBtnText:"Remover"});case 3:return t(n.id),e.next=6,(0,Z.PN)({comment_id:n.id});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)(z.m,{roles:["ADMIN"],permissions:["MANAGE_USERS","MANAGE_CAMPAIGNS"],children:(0,d.jsx)(f.zx,(0,s.Z)((0,a.Z)({size:"xs",variant:"outline",ml:"0.75rem",borderRadius:"full",color:"red",fontWeight:400,transition:"border-color 0.2s",_hover:{borderColor:"red"},leftIcon:(0,d.jsx)(M.X,{color:"inherit"}),onClick:o},e),{children:"Remover"}))})}},29059:function(e,n,r){r.d(n,{E:function(){return j}});var t=r(47568),i=r(26042),o=r(69396),a=r(99534),s=r(34051),c=r.n(s),l=r(85893),u=r(3682),d=r(67294),m=r(97375),p=r(44697),h=r(68527),x=r(33441),f=r(15193),v=r(19703),g=r(76422),C=(0,d.createContext)(null);function j(e){var n=e.children,r=e.onSubmit,s=e.asChild,x=void 0!==s&&s,f=(0,a.Z)(e,["children","onSubmit","asChild"]),j=(0,d.useState)(!1),b=j[0],k=j[1],w=(0,d.useState)(""),y=w[0],S=w[1],_=(0,d.useCallback)((function(e){return(0,u.Z)(e)}),[]),M=(0,d.useCallback)((function(e,n){return(0,o.Z)((0,i.Z)({},e),{ref:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){n.forEach((function(n){return(0,m.kR)(n,e)}))}}(_,n),value:y,onChange:function(e){return S(e.target.value)}})}),[y,_]),E=(0,d.useCallback)((function(e,n){return(0,o.Z)((0,i.Z)({},e),{ref:n,type:"reset",onClick:(0,v.PP)((function(){return S("")}),null===e||void 0===e?void 0:e.onClick)})}),[]),Z=(0,d.useCallback)((function(e,n){return(0,o.Z)((0,i.Z)({},e),{ref:n,type:"submit",isLoading:b,isDisabled:0===y.length||y.length>200})}),[y,b]),z=(0,p.u)(r,[]),O=(0,d.useCallback)(function(){var e=(0,t.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),k(!0),e.next=5,z(y);case 5:k(!1),S("");case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[z,y]),R=(0,d.useMemo)((function(){return{getInputProps:M,getCancelProps:E,getSubmitProps:Z}}),[M,E,Z]),I=x?g.g:h.xu;return(0,l.jsx)(C.Provider,{value:R,children:(0,l.jsx)(I,(0,o.Z)((0,i.Z)({as:"form",onSubmit:O},f),{children:n}))})}var b=(0,d.forwardRef)((function(e,n){var r=(0,d.useContext)(C).getInputProps;return(0,l.jsx)(x.g,(0,i.Z)({minH:20,variant:"primary",fontSize:["0.875rem",null,"1rem"],placeholder:"Digite seu recado..."},r(e,n)))}));b.displayName="CommentFormTextarea",j.Textarea=b;var k=(0,d.forwardRef)((function(e,n){var r,t=e.asChild,s=void 0!==t&&t,c=(0,a.Z)(e,["asChild"]),u=(0,d.useContext)(C).getSubmitProps,m=s?g.g:f.zx,p=u(c,n),h=s?p:(0,i.Z)({variant:"outline"},p);return(0,l.jsx)(m,(0,o.Z)((0,i.Z)({},h),{children:null!==(r=null===c||void 0===c?void 0:c.children)&&void 0!==r?r:"Publicar"}))}));k.displayName="CommentFormSubmit",j.Submit=k;var w=(0,d.forwardRef)((function(e,n){var r,t=e.asChild,s=void 0!==t&&t,c=(0,a.Z)(e,["asChild"]),u=(0,d.useContext)(C).getCancelProps,m=s?g.g:f.zx,p=u(c,n),h=s?p:(0,i.Z)({variant:"ghost"},p);return(0,l.jsx)(m,(0,o.Z)((0,i.Z)({},h),{children:null!==(r=null===c||void 0===c?void 0:c.children)&&void 0!==r?r:"Cancelar"}))}));w.displayName="CommentFormCancel",j.Cancel=w},31759:function(e,n,r){r.d(n,{D:function(){return j}});var t=r(47568),i=r(34051),o=r.n(i),a=r(85893),s=r(3682),c=r(67294),l=r(92684),u=r(68527),d=r(15193),m=r(37496),p=r(83276),h=r(81649),x=r(63249),f=r(78318),v=r(26429),g=r(29059),C=r(78003);function j(){var e=(0,p.a)().user,n=(0,c.useRef)(null),r=(0,c.useState)(!1),i=r[0],j=r[1];(0,c.useEffect)((function(){var e;i&&(null===n||void 0===n||null===(e=n.current)||void 0===e||e.focus())}),[i]);var b=(0,h.i)((0,x.P)((function(){var e,r;j(!0),null===n||void 0===n||null===(e=n.current)||void 0===e||null===(r=e.focus)||void 0===r||r.call(e),(0,s.Z)(null===n||void 0===n?void 0:n.current)}))),k=(0,l.Sx)({base:"2rem",md:"3rem"},"base"),w=(0,f.M)(),y=w.total,S=w.addComment,_=w.parent_id,M=function(){var e=(0,t.Z)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=S,e.next=4,(0,C.$H)({campaignId:_,description:n});case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=10;break;case 8:e.prev=8,e.t2=e.catch(0);case 10:return e.prev=10,j(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,8,10,13]])})));return function(n){return e.apply(this,arguments)}}();return 0===y?null:(0,a.jsxs)(u.xu,{mt:"1.5rem",display:"flex",alignItems:"flex-start",children:[(0,a.jsx)(v.q,{src:null===e||void 0===e?void 0:e.avatar_url,boxSize:["2rem",null,"3rem"],mr:[2,null,4]}),(0,a.jsxs)(u.xu,{position:"relative",w:"full",children:[(0,a.jsx)(d.zx,{position:"absolute",top:0,left:0,"aria-hidden":!0,isFullWidth:!0,variant:"unstyled",display:"inline-flex",justifyContent:"flex-start",color:"gray.500",cursor:"text",fontSize:["0.875rem",null,"1rem"],fontWeight:400,onClick:b,height:["2rem",null,"3rem"],opacity:i?0:1,transition:"opacity 300ms",children:"Adicionar recado..."}),(0,a.jsx)(m.UO,{in:i,startingHeight:k,animateOpacity:!0,children:(0,a.jsxs)(g.E,{position:"relative",zIndex:i?1:-1,opacity:i?1:0,transition:"opacity 300ms",onSubmit:M,children:[(0,a.jsx)(g.E.Textarea,{ref:n,fontSize:["0.875rem",null,"1rem"]}),(0,a.jsxs)(d.hE,{size:"sm",w:"full",justifyContent:"flex-end",mt:2,children:[(0,a.jsx)(g.E.Cancel,{onClick:function(){return j(!1)}}),(0,a.jsx)(g.E.Submit,{})]})]})})]})]})}},75811:function(e,n,r){r.d(n,{F:function(){return j}});var t,i=r(47568),o=r(34051),a=r.n(o),s=r(85893),c=r(85641),l=r(68527),u=r(15193),d=r(67294),m=r(11163),p=r(34394),h=r(95509),x=r(78003),f=r(84606),v=r(17446),g=r(61052),C=r(29059);function j(e){var n=e.isOpen,r=e.onClose,t=e.campaign_id,o=e.onCommentCreated,j=(0,m.useRouter)(),b=(0,d.useState)("IDLE"),k=b[0],w=b[1],y=function(){var e=(0,i.Z)(a().mark((function e(n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w("SUBMITTING"),e.next=4,(0,x.$H)({description:n,campaignId:t});case 4:i=e.sent,w("SUCCESS"),null===o||void 0===o||o(i),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),w("ERROR"),(0,f.S)(e.t0),r();case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,s.jsx)(v.u,{isOpen:n,onClose:r,onCloseComplete:function(){return w("IDLE")},isCentered:!0,children:(0,s.jsxs)(p.rs,{children:[(0,s.jsx)(p.JZ,{condition:"SUCCESS"===k,children:(0,s.jsxs)(g.h,{width:"fit-content",padding:"0 2.5rem",children:[(0,s.jsx)(c.xB,{padding:"2rem 0rem 1rem",fontSize:"1.5rem",lineHeight:"1",children:"Sua mensagem foi publicada! \ud83c\udf89"}),(0,s.jsx)(c.fe,{padding:"0rem 0rem 1.5rem",lineHeight:"1.38",color:"gray.500",children:j.asPath.startsWith(h.F.getPath("profile-contributions"))&&"Para visualizar sua mensagem v\xe1 at\xe9 a vaquinha."}),(0,s.jsx)(c.mz,{as:l.gC,padding:"0 0 2rem",children:(0,s.jsx)(u.zx,{type:"button",isFullWidth:!0,onClick:r,children:"Certo, entendi"})})]})}),(0,s.jsx)(p.gA,{children:(0,s.jsx)(C.E,{asChild:!0,onSubmit:y,children:(0,s.jsxs)(g.h,{width:"fit-content",padding:"0 2.5rem",children:[(0,s.jsx)(c.xB,{padding:"2rem 0rem 1rem",fontSize:"1.5rem",lineHeight:"1",children:"Deixe sua mensagem de apoio"}),(0,s.jsx)(c.fe,{padding:"0rem 0rem 2rem",children:(0,s.jsx)(C.E.Textarea,{rows:5,placeholder:"Descri\xe7\xe3o..."})}),(0,s.jsxs)(c.mz,{as:l.gC,padding:"0 0 2rem",children:[(0,s.jsx)(C.E.Submit,{asChild:!0,children:(0,s.jsx)(u.zx,{type:"submit",isFullWidth:!0,isLoading:"SUBMITTING"===k,children:"Confirmar"})}),(0,s.jsx)(C.E.Cancel,{asChild:!0,onClick:r,children:(0,s.jsx)(u.zx,{isFullWidth:!0,color:"pink.600",type:"reset",variant:"ghost",disabled:"SUBMITTING"===k,children:"Voltar"})})]})]})})})]})})}!function(e){e.IDLE="IDLE",e.SUBMITTING="SUBMITTING",e.SUCCESS="SUCCESS",e.ERROR="ERROR"}(t||(t={}))},49729:function(e,n,r){r.d(n,{$:function(){return j}});var t=r(26042),i=r(69396),o=r(85893),a=r(67294),s=r(68527),c=r(67986),l=r(29451),u=r(97375),d=r(34651),m=r(15193),p=r(78318),h=r(81649),x=r(63249),f=r(75811);function v(){var e=(0,u.qY)(),n=e.isOpen,r=e.onOpen,t=e.onClose,i=(0,p.M)(),a=i.parent_id,c=i.addComment,l=(0,h.i)((0,x.P)(r));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.M5,{flexDirection:"column",maxW:"320px",mx:"auto",children:[(0,o.jsx)(d.Ee,{width:"100%",height:"auto",src:"/assets/images/empty_state.svg",alt:"","aria-hidden":!0}),(0,o.jsxs)(s.xv,{color:"gray.500",as:"span",textAlign:"center",children:["Ningu\xe9m deixou uma mensagem ainda.",(0,o.jsx)("br",{}),"Seja o primeiro!"]}),(0,o.jsx)(m.zx,{mt:"1.5rem",variant:"link",size:"md",onClick:l,children:"Deixar mensagem"})]}),(0,o.jsx)(f.F,{isOpen:n,onClose:t,campaign_id:a,onCommentCreated:c})]})}var g=r(21190),C=r(44220);function j(e){var n=e.hasMore,r=e.loadMore,u=e.dataLength,d=void 0!==r?c.a:a.Fragment,m=void 0!==r?{hasMore:n,dataLength:u,loadMore:r}:{},h=(0,p.M)().comments;return 0===h.length?(0,o.jsx)(v,{}):(0,o.jsx)(d,(0,i.Z)((0,t.Z)({},m),{children:(0,o.jsx)(s.aV,{mt:"1.5rem",w:"full",children:(0,o.jsx)(g.M,{children:h.map((function(e){return(0,o.jsxs)(C.E.li,{exit:{opacity:0},children:[(0,o.jsx)(l.s,{comment:e}),(0,o.jsx)(s.xu,{height:"1.5rem"})]},e.id)}))})})}))}},63349:function(e,n,r){r.d(n,{l:function(){return w}});var t=r(47568),i=r(34051),o=r.n(i),a=r(85893),s=r(67294),c=r(89583),l=r(68527),u=r(49609),d=r(85641),m=r(10894),p=r(4612),h=r(15193),x=r(17446),f=r(61052),v=r(17671),g=r(12487),C=r(61910),j=r(366),b=r(22136);function k(e){var n=e.href,r=e.icon,t=e.title;return(0,a.jsxs)(h.zx,{variant:"unstyled",as:l.rU,href:n,target:"_blank",size:"lg",rel:"noopener noreferrer",borderRadius:"full",display:"inline-flex",flexDirection:"column",alignItems:"center",gap:"1rem",fontWeight:"normal",color:"gray.400",_focus:{outline:"none",boxShadow:"none"},children:[(0,s.cloneElement)(r,{fontSize:"1.5em"}),(0,a.jsx)(l.xv,{as:"span",children:t})]})}function w(e){var n=e.isOpen,r=e.shareLink,i=e.onClose,w=e.onCloseComplete,y=void 0===w?function(){}:w,S=encodeURIComponent(r),_=(0,s.useState)(!1),M=_[0],E=_[1],Z=function(){var e=(0,t.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(r);case 2:E(!0),i();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){E(!1)}),[]),(0,a.jsx)(x.u,{isOpen:n,onClose:i,onCloseComplete:y,size:"lg",children:(0,a.jsx)(f.h,{children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.x,{children:(0,a.jsx)(d.ol,{})}),(0,a.jsxs)(g.f,{mb:"1rem",display:"flex",flexDirection:"column",children:[(0,a.jsx)(l.X6,{as:"h2",fontSize:"1.5rem",children:"Ajude compartilhando"}),(0,a.jsx)(l.xv,{as:"span",color:"gray.500",children:"Vaquinhas compartilhadas nas redes sociais arrecadam at\xe9 5x mais!"}),(0,a.jsx)(C.W,{children:(0,a.jsxs)(j.a,{my:"1.25rem",justify:"space-around",direction:"row",spacing:"2rem",py:"1.25rem",px:"0.25rem",mx:"-0.25rem",children:[(0,a.jsx)(b.H,{w:"fit-content",children:(0,a.jsx)(k,{title:"Facebook","aria-label":"Compartilhar p\xe1gina no facebook",icon:(0,a.jsx)(m.JO,{as:c.tBk,color:"facebook.500"}),href:"https://www.facebook.com/sharer.php?u=".concat(S),onClick:i})}),(0,a.jsx)(b.H,{w:"fit-content",children:(0,a.jsx)(k,{title:"Twitter","aria-label":"Compartilhar p\xe1gina no twitter",icon:(0,a.jsx)(m.JO,{as:c.fWC,color:"twitter.500"}),href:"https://twitter.com/intent/tweet?url=".concat(S),onClick:i})}),(0,a.jsx)(b.H,{w:"fit-content",children:(0,a.jsx)(k,{title:"Whatsapp","aria-label":"Compartilhar p\xe1gina no whatsapp",icon:(0,a.jsx)(m.JO,{as:c.xpo,color:"whatsapp.500"}),href:"https://wa.me?text=".concat(S),onClick:i})}),(0,a.jsx)(b.H,{w:"fit-content",children:(0,a.jsx)(k,{title:"Linkedin","aria-label":"Compartilhar p\xe1gina no linkedin",icon:(0,a.jsx)(m.JO,{as:c.BUd,color:"linkedin.500"}),href:"https://www.linkedin.com/shareArticle?url=".concat(S),onClick:i})})]})}),(0,a.jsx)(l.xv,{as:"span",color:"gray.500",children:"ou copie e compartilhe o link abaixo"}),(0,a.jsxs)(p.BZ,{border:"1px solid",borderColor:"gray.300",borderRadius:"md",children:[(0,a.jsx)(p.II,{value:r,border:"transparent",borderRadius:"inherit"}),(0,a.jsx)(p.xW,{border:"none",bgColor:"transparent",children:(0,a.jsx)(h.zx,{variant:"link",size:"md",ml:"1rem",color:M?"green":"pink.600",fontWeight:"500",textDecoration:"none",onClick:Z,children:M?"Copiado":"Copiar"})})]})]})]}):(0,a.jsx)(l.M5,{h:"320px",children:(0,a.jsx)(u.$,{size:"lg",color:"pink.600"})})})})}},52804:function(e,n,r){r.d(n,{p:function(){return o}});var t=r(89664),i=r(83276);function o(e){var n=e.permissions,r=e.roles,o=(0,i.a)(),a=o.user;return!!o.isAuthenticated&&(0,t.h)({user:a,permissions:n,roles:r})}},78318:function(e,n,r){r.d(n,{C:function(){return h},M:function(){return x}});var t=r(47568),i=r(26042),o=r(29815),a=r(34051),s=r.n(a),c=r(85893),l=r(67294),u=r(19703),d=r(78003),m=r(84606),p=(0,l.createContext)(null);function h(e){var n,r,a=e.children,h=e.initialState,x=e.parent_id,f=e.amount_per_page,v=null!==(n=null===h||void 0===h?void 0:h.total)&&void 0!==n?n:0,g=null!==(r=null===h||void 0===h?void 0:h.comments)&&void 0!==r?r:[],C=g.length>0?g[g.length-1]:void 0,j=C?new Date(null===C||void 0===C?void 0:C.created_at):void 0,b=(0,l.useState)(!1),k=b[0],w=b[1],y=(0,l.useState)(g),S=y[0],_=y[1],M=(0,l.useRef)(v);(0,l.useRef)(S.length).current=S.length;var E=(0,l.useRef)(!1);E.current=M.current>S.length;var Z=(0,l.useRef)({parent_id:x,amount:null!==f&&void 0!==f?f:6,last_created_at:j});Z.current.last_created_at=S.length>0?new Date(S[S.length-1].created_at):void 0;var z=(0,l.useCallback)(function(){var e=(0,t.Z)(s().mark((function e(n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(M.current>0)||E.current){e.next=2;break}return e.abrupt("return");case 2:return w(!0),e.prev=3,e.next=6,(0,d.BM)((0,i.Z)({},Z.current,n?{amount:n.amount}:{}));case 6:r=e.sent,M.current=0===M.current?r.total:M.current,_((function(e){return(0,o.Z)(e).concat((0,o.Z)(r.comments))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),(0,m.S)(e.t0);case 14:return e.prev=14,w(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})));return function(n){return e.apply(this,arguments)}}(),[]),O=(0,l.useCallback)((function(e){M.current+=1,_((function(n){return[e].concat((0,o.Z)(n))}))}),[]),R=(0,l.useCallback)(function(){var e=(0,t.Z)(s().mark((function e(n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,e.prev=1,M.current=M.current>0?M.current-1:0,_((function(e){return r=e.length-1,e.filter((function(e){return e.id!==n}))})),!(M.current>r)){e.next=7;break}return e.next=7,z({amount:1});case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),[z]),I=(0,l.useCallback)((function(e){_((function(n){return n.map((function(n){return n.id===e.id?e:n}))}))}),[]),N=(0,l.useMemo)((function(){return{comments:S,isLoading:k,addComment:O,removeComment:R,updateComment:I,loadCommentsBy:z,total:M.current,hasMore:E.current,parent_id:Z.current.parent_id}}),[S,k,z,O,R,I]);return(0,c.jsx)(p.Provider,{value:N,children:(0,u.Pu)(a,N)})}function x(){var e=(0,l.useContext)(p);if(!e)throw new Error("`useComments` must be used within a CommentsProvider");return{parent_id:e.parent_id,comments:e.comments,total:e.total,hasMore:e.hasMore,isLoading:e.isLoading,addComment:e.addComment,removeComment:e.removeComment,updateComment:e.updateComment,loadCommentsBy:e.loadCommentsBy}}},48081:function(e,n,r){r.d(n,{M:function(){return _},H:function(){return M}});var t=r(85893),i=r(67294),o=r(11163),a=r(51773),s=r(97375),c=r(26042),l=r(69396),u=r(68527),d=r(1358),m=r(15193),p=r(87536),h=r(17446),x=r(61052),f=r(17671),v=r(12487),g=r(29906),C=r(27122),j=r(74231),b=r(47533),k=j.Ry().shape({amount:j.Z_().required("O valor \xe9 obrigat\xf3rio")});function w(e){var n=e.isOpen,r=e.onClose,a=e.onCloseComplete,s=e.onSubmitNew,j=((0,o.useRouter)(),(0,p.cI)({resolver:(0,b.X)(k)})),w=j.handleSubmit,y=j.watch,S=j.formState,_=y("amount"),M=(0,i.useMemo)((function(){return!isNaN(Number(_))&&Number(_)>0}),[_]);return(0,t.jsx)(h.u,{isOpen:n,onClose:r,onCloseComplete:a,size:"lg",children:(0,t.jsx)(p.RV,(0,l.Z)((0,c.Z)({},j),{children:(0,t.jsxs)(x.h,{mx:"1rem",as:"form",onSubmit:w((function(e){return s(Number(e.amount))})),children:[(0,t.jsxs)(f.x,{textAlign:"center",children:[(0,t.jsx)(u.xv,{as:"strong",display:"block",fontSize:["1.25rem","1.5rem"],fontWeight:"bold",lineHeight:"1.5rem",color:"gray.700",children:"Quero Doar"}),(0,t.jsx)(u.xv,{as:"span",fontSize:["0.875rem","1rem"],fontWeight:"normal",lineHeight:"1.375rem",color:"gray.500",children:"Voc\xea est\xe1 perto de mudar o final de uma hist\xf3ria!"})]}),(0,t.jsx)(v.f,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,t.jsxs)(u.xu,{as:"fieldset",w:"full",mb:"0.75rem",children:[(0,t.jsx)(d.TX,{as:"label",children:"Valor da doa\xe7\xe3o"}),(0,t.jsx)(u.xv,{as:"h2",color:"gray.500",mb:"0.5rem",textAlign:"center",children:"Informe o valor da doa\xe7\xe3o abaixo:"}),(0,t.jsx)(g.L,{name:"amount",placeholder:"0,00"}),(0,t.jsx)(u.xv,{color:"gray.500",fontSize:"0.875rem",children:"Valores m\xednimos para doa\xe7\xe3o:"}),(0,t.jsxs)(u.aV,{color:"gray.500",fontSize:"0.875rem",children:[(0,t.jsxs)(u.HC,{children:[(0,t.jsx)(u.xv,{as:"span",fontWeight:"bold",children:"Pix"})," ","- doe qualquer valor"]}),(0,t.jsxs)(u.HC,{children:[(0,t.jsx)(u.xv,{as:"span",fontWeight:"bold",children:"Cart\xe3o de cr\xe9dito, Boleto, PayPal"})," ","- R$ 25,00 (vinte e cinco reais)"]}),(0,t.jsxs)(u.HC,{children:[(0,t.jsx)(u.xv,{as:"span",fontWeight:"bold",children:"Carteira"})," ","- doe qualquer valor (utilize seus cr\xe9ditos)"]})]})]})}),(0,t.jsx)(C.m,{mt:{base:null,sm:"-1rem"},pt:"0",children:(0,t.jsx)(m.zx,{type:"submit",width:{base:"full",sm:"auto"},isDisabled:!M,isLoading:S.isSubmitting,children:"Continuar"})})]})}))})}var y=r(95509),S=(0,i.createContext)({});function _(e){var n=e.children,r=e.campaign,c=(0,o.useRouter)(),l=(0,a.z$)(),u=(0,s.qY)(),d=u.isOpen,m=u.onClose,p=u.onOpen,h=(0,i.useCallback)((function(){return l.track("add_to_cart",{items:[{item_id:r.id,item_name:r.slug,item_category:r.category.name,quantity:1}]},{},(function(){return p()}))}),[l,r,p]),x=(0,i.useCallback)((function(e){return l.track("begin_checkout",{currency:"BRL",value:Number(e),items:[{quantity:1,currency:"BRL",price:Number(e),item_id:r.id,item_name:r.slug,item_category:r.category.name}]},{},(function(){var n,r,t;fbq("track","Purchase",{value:Number(e),currency:"BRL"}),c.push(y.F.getPath("app-slug-donate",{slug:c.query.slug.toString(),amount:e,shared_campaign_id:null!==(t=null===c||void 0===c||null===(n=c.query)||void 0===n||null===(r=n.shared_campaign_id)||void 0===r?void 0:r.toString())&&void 0!==t?t:""}))}))}),[l,r,c]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Provider,{value:{onOpenModalDonation:h,onCloseModalDonation:m},children:n}),(0,t.jsx)(w,{isOpen:d,onClose:m,onSubmitNew:x})]})}function M(){var e=(0,i.useContext)(S);if(!e)throw new Error("`useDonation` must be used into `DonationProvider`");return e}_.displayName="DonationProvider"},50293:function(e,n,r){r.d(n,{K:function(){return v},U:function(){return g}});var t=r(47568),i=r(34051),o=r.n(i),a=r(85893),s=r(67294),c=r(97375),l=r(83276),u=r(63349),d=r(11163),m=r(18469),p=r(50792);function h(e){return x.apply(this,arguments)}function x(){return(x=(0,t.Z)(o().mark((function e(n){var r,t,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.campaign_id,t=(0,m.R)(void 0),e.prev=2,e.next=5,t.post("/campaigns-shared",{campaign_id:r});case 5:return i=e.sent,e.abrupt("return",i.data.share_campaign.id);case 9:throw e.prev=9,e.t0=e.catch(2),new p.g(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var f=(0,s.createContext)({});function v(e){var n=e.children,r=e.campaign_id,i=(0,c.qY)(),m=i.isOpen,p=i.onOpen,x=i.onClose,v=(0,d.useRouter)(),g=(0,l.a)().user,C=(0,s.useState)(null),j=C[0],b=C[1],k=(0,s.useCallback)((function(){x()}),[x]),w=(0,s.useCallback)((0,t.Z)(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="https://voaa.me"+v.asPath,!g){e.next=6;break}return e.next=4,h({campaign_id:r});case 4:t=e.sent,n+="?shared_campaign_id=".concat(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),[g,v,r]),y=(0,s.useCallback)((0,t.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.share){e.next=14;break}return e.prev=1,e.t0=navigator,e.next=5,w();case 5:e.t1=e.sent,e.t2={url:e.t1},e.t0.share.call(e.t0,e.t2),e.next=12;break;case 10:e.prev=10,e.t3=e.catch(1);case 12:e.next=20;break;case 14:return p(),e.t4=b,e.next=18,w();case 18:e.t5=e.sent,(0,e.t4)(e.t5);case 20:case"end":return e.stop()}}),e,null,[[1,10]])}))),[p,w]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Provider,{value:{onShareCampaign:y},children:n}),(0,a.jsx)(u.l,{isOpen:m,shareLink:j,onClose:k,onCloseComplete:function(){return b(null)}})]})}function g(){var e=(0,s.useContext)(f);if(!e)throw new Error("`useShareCampaign` must be used into `ShareCampaignProvider`");return e}},63249:function(e,n,r){r.d(n,{B:function(){return w},P:function(){return y}});var t,i=r(47568),o=r(29815),a=r(34051),s=r.n(a),c=r(85893),l=r(97375),u=r(68527),d=r(49609),m=r(15193),p=r(67294),h=r(17446),x=r(61052),f=r(17671),v=r(12487),g=r(27122),C=r(83276),j=r(52804),b=r(76626);!function(e){e.IDLE="IDLE",e.FETCHING="FETCHING",e.CAN_COMMENT="CAN_COMMENT",e.CANT_COMMENT="CANT_COMMENT"}(t||(t={}));var k=(0,p.createContext)(null);function w(e){var n=e.children,r=e.campaign_id,t=(0,l.qY)(),a=t.isOpen,w=t.onOpen,y=t.onClose,S=(0,l.qY)(),_=S.isOpen,M=S.onOpen,E=S.onClose,Z=(0,C.a)().user,z=(0,j.p)({roles:["ADMIN"],permissions:["MANAGE_CAMPAIGNS","MANAGE_USERS"]}),O=(0,p.useRef)(null===Z||void 0===Z?void 0:Z.id),R=(0,p.useRef)(r),I=(0,p.useRef)("IDLE");(0,p.useEffect)((function(){O.current=null===Z||void 0===Z?void 0:Z.id,R.current=r}));var N=(0,p.useCallback)((function(e){return(0,i.Z)(s().mark((function n(){var r,t,i,a,c=arguments;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(r=c.length,t=new Array(r),i=0;i<r;i++)t[i]=c[i];if(z||"IDLE"!==I.current){n.next=20;break}return I.current="FETCHING",n.prev=3,M(),n.next=7,new Promise((function(e){return setTimeout(e,1e3)}));case 7:return n.next=9,b.h.get("/donors/".concat(O.current,"/contributions"),{params:{campaign_id:R.current,status:"PAID",amount:1,page:1}});case 9:a=n.sent,I.current=parseInt(a.headers["x-total-count"],10)?"CAN_COMMENT":"CANT_COMMENT",n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(3),I.current="IDLE",n.abrupt("return");case 17:return n.prev=17,E(),n.finish(17);case 20:if("CANT_COMMENT"!==I.current){n.next=23;break}return w(),n.abrupt("return");case 23:return n.abrupt("return",Promise.resolve(e.apply(void 0,(0,o.Z)(t))));case 24:case"end":return n.stop()}}),n,null,[[3,13,17,20]])})))}),[z,M,E,w]);return(0,c.jsxs)(k.Provider,{value:{withCanUserComment:N},children:[n,(0,c.jsx)(h.u,{size:"sm",isOpen:_,onClose:E,isCentered:!0,closeOnOverlayClick:!1,closeOnEsc:!1,children:(0,c.jsx)(x.h,{h:"194px",children:(0,c.jsx)(u.M5,{h:"full",children:(0,c.jsx)(d.$,{size:"lg",color:"pink.600"})})})}),(0,c.jsx)(h.u,{size:"sm",isOpen:a,onClose:y,isCentered:!0,closeOnOverlayClick:!1,children:(0,c.jsxs)(x.h,{children:[(0,c.jsx)(f.x,{fontSize:["1.5rem","1.75rem"],textAlign:"center",children:"Ol\xe1 \ud83d\ude0a"}),(0,c.jsx)(v.f,{color:"gray.500",textAlign:"center",mt:"-1rem",children:"Fa\xe7a uma doa\xe7\xe3o antes para poder deixar sua mensagem"}),(0,c.jsx)(g.m,{display:"flex",flexDirection:"column",gap:"0.875rem",children:(0,c.jsx)(m.zx,{isFullWidth:!0,size:"md",color:"pink.600",bgColor:"pink.50",variant:"unstyled",onClick:y,children:"OK"})})]})})]})}function y(e){var n=(0,p.useContext)(k);if(!n)throw new Error("`useWithCanUserComment` must be used within a CanUserCommentProvider");return n.withCanUserComment(e)}},78003:function(e,n,r){r.d(n,{$H:function(){return c},BM:function(){return m},Gb:function(){return g},Hi:function(){return u},PN:function(){return h},xG:function(){return f}});var t=r(47568),i=r(34051),o=r.n(i),a=r(18469),s=r(50792);function c(e){return l.apply(this,arguments)}function l(){return l=(0,t.Z)(o().mark((function e(n){var r,t,i,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,e.prev=1,t=(0,a.R)(r),e.next=5,t.post("campaigns/".concat(n.campaignId,"/comments"),{description:n.description});case 5:return i=e.sent,e.abrupt("return",i.data.data);case 9:throw e.prev=9,e.t0=e.catch(1),new s.g(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),l.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=(0,t.Z)(o().mark((function e(n){var r,t,i,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,e.prev=1,t=(0,a.R)(r),e.next=5,t.post("comments/".concat(n.commentId,"/reply"),{description:n.description});case 5:return i=e.sent,e.abrupt("return",i.data.data);case 9:throw e.prev=9,e.t0=e.catch(1),new s.g(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=(0,t.Z)(o().mark((function e(n){var r,t,i,c,l,u,d,m,p=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.parent_id,t=n.last_created_at,i=n.amount,c=void 0===i?6:i,l=p.length>1&&void 0!==p[1]?p[1]:void 0,e.prev=1,u=(0,a.R)(l),e.next=5,u.get("/comments",{params:{amount:c,parent_id:r,last_created_at:t}});case 5:return d=e.sent,m=parseInt(d.headers["x-total-count"]),e.abrupt("return",{comments:d.data.data,total:m});case 10:throw e.prev=10,e.t0=e.catch(1),console.error(e.t0),new s.g(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),p.apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=(0,t.Z)(o().mark((function e(n){var r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.comment_id,t=(0,a.R)(),e.prev=2,e.next=5,t.delete("/comments/".concat(r));case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new s.g(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return(v=(0,t.Z)(o().mark((function e(n){var r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.comment_id,t=(0,a.R)(),e.prev=2,e.next=5,t.post("/comments/".concat(r,"/like"));case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new s.g(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function g(e){return C.apply(this,arguments)}function C(){return(C=(0,t.Z)(o().mark((function e(n){var r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.comment_id,t=(0,a.R)(),e.prev=2,e.next=5,t.patch("/comments/".concat(r,"/unlike"));case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new s.g(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}},20495:function(e,n,r){function t(e){var n=6e4,r=36e5,t=864e5,i=2592e6,o=94608e7,a=new Intl.RelativeTimeFormat("pt"),s=new Date(e).getTime(),c=(new Date).getTime()-s;return c<n?a.format(-1*Math.round(c/1e3),"seconds"):c<r?a.format(-1*Math.round(c/n),"minutes"):c<t?a.format(-1*Math.round(c/r),"hours"):c<i?a.format(-1*Math.round(c/t),"days"):c<o?a.format(-1*Math.round(c/i),"months"):a.format(-1*Math.round(c/o),"years")}r.d(n,{T:function(){return t}})}}]);